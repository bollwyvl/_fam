digraph {
    rankdir=BT
    node[shape=none]
    env[label="environment.yml"]
    mamba_env[label="mamba.yml"]
    mamba
    apt_txt[label="apt.txt"]
    overrides[label="overrides.json"]
    jnc[label="jupyter_notebook_config.json"]
    labext[label="labex.txt"]
    postBuild

    readme[label="_fam/README.dio.ipynb"]

    subgraph cluster_github {
        label="github"
        env_branch[label="env"]
        content_branch[label="content"]
    }
    
    subgraph cluster_binderhub {
        label="binderhub"
        subgraph cluster_r2d {
            label=r2d
            conda
            apt
            subgraph cluster_postbuild {
                label="postbuild"
                mamba

                subgraph cluster_forks {
                    label="forks"
                    jlpm
                }

                lab_install[label="labextension\ninstall"]
            }
        }
        env -> conda
        env_branch -> conda -> apt -> mamba
        apt_txt -> apt
        postBuild -> mamba -> jlpm -> lab_install
        mamba_env -> mamba
        labext -> lab_install
        lab_install -> start
        {jnc overrides} -> start -> jvc
        subgraph cluster_single {
            label="single user server"
            start[label="jupyter notebook"]
            nbgitpuller
            jvc[label="jupyter_videochat"]
            jg[label="jupyter_git"]
        }
        subgraph cluster_kernels {
            label="kernels"
            lsp_kernel[label="Language Server Kernel"]
            pidgy
            IPython
            xpython
        }
    }
    subgraph cluster_jitsi {
        label="https://jit.si"
        xmpp
    }
    start -> nbgitpuller
    content_branch -> nbgitpuller -> readme
    subgraph cluster_browser {
        label="browser"
        subgraph cluster_lab {
            label="JupyterLab"
            lab
            jitsi
            drawio
            Notebook
            ProseMirror
            Blockly
            CodeMirror
            lab_lsp[label="jupyterlab-lsp"]
            lab_debug[label="jupyterlab-debugger"]
            lab_git[label="@jupyterlab/git"]
        }
    }
    lsp_kernel -> lab_lsp
    xpython -> lab_debug
    jg -> lab_git
    start -> jg
    jvc -> jitsi
    xmpp -> jitsi
    nbgitpuller -> lab -> {jitsi drawio}
    readme -> drawio
    readme -> Notebook -> {Blockly ProseMirror CodeMirror}
    subgraph cluster_widgets {
        label="widgets"
        ipywidgets -> {wxyz bqplot ipyvolume}
    }
    Notebook -> ipywidgets
    {keyboard mouse camera mic} -> you
    {ProseMirror CodeMirror Blockly lab_lsp lab_debug} -> {keyboard mouse}
    jitsi -> {camera mic}
}
